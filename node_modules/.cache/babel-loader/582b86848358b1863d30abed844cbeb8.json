{"ast":null,"code":"/**\n * A class representing a service that processes the data for match schedule\n * and generates leaderboard.\n * \n * NOTE: MAKE SURE TO IMPLEMENT ALL EXISITNG METHODS BELOW WITHOUT CHANGING THE INTERFACE OF THEM, \n *       AND PLEASE DO NOT RENAME, MOVE OR DELETE THIS FILE.  \n * \n *       ADDITIONALLY, MAKE SURE THAT ALL LIBRARIES USED IN THIS FILE FILE ARE COMPATIBLE WITH PURE JAVASCRIPT\n * \n */\nclass LeagueService {\n  constructor(apiUrl, token) {\n    this.apiUrl = apiUrl;\n    this.token = token;\n  }\n  /**\n   * Sets the match schedule.\n   * Match schedule will be given in the following form:\n   * [\n   *      {\n   *          matchDate: [TIMESTAMP],\n   *          stadium: [STRING],\n   *          homeTeam: [STRING],\n   *          awayTeam: [STRING],\n   *          matchPlayed: [BOOLEAN],\n   *          homeTeamScore: [INTEGER],\n   *          awayTeamScore: [INTEGER]\n   *      },\n   *      {\n   *          matchDate: [TIMESTAMP],\n   *          stadium: [STRING],\n   *          homeTeam: [STRING],\n   *          awayTeam: [STRING],\n   *          matchPlayed: [BOOLEAN],\n   *          homeTeamScore: [INTEGER],\n   *          awayTeamScore: [INTEGER]\n   *      }    \n   * ]\n   * \n   * @param {Array} matches List of matches.\n   */\n\n\n  async setMatches(matches) {\n    try {\n      const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.token}`\n        },\n        body: JSON.stringify(matches)\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to set matches');\n      }\n    } catch (error) {\n      console.error('Error setting matches:', error);\n      throw error;\n    }\n  }\n  /**\n   * Returns the full list of matches.\n   * \n   * @returns {Array} List of matches.\n   */\n\n\n  async getMatches() {\n    try {\n      const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n        headers: {\n          'Authorization': `Bearer ${this.token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch matches');\n      }\n\n      const data = await response.json();\n      return data.matches;\n    } catch (error) {\n      console.error('Error fetching matches:', error);\n      throw error;\n    }\n  }\n  /**\n   * Returns the leaderboard in a form of a list of JSON objecs.\n   * \n   * [     \n   *      {\n   *          teamName: [STRING]',\n   *          matchesPlayed: [INTEGER],\n   *          goalsFor: [INTEGER],\n   *          goalsAgainst: [INTEGER],\n   *          points: [INTEGER]     \n   *      },      \n   * ]       \n   * \n   * @returns {Array} List of teams representing the leaderboard.\n   */\n\n\n  async getLeaderboard() {\n    try {\n      const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n        headers: {\n          'Authorization': `Bearer ${this.token}`\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch leaderboard');\n      }\n\n      const data = await response.json(); // Inicializa um objeto para armazenar as estatísticas das equipes\n\n      const teams = {}; // Mapeia os dados de partidas para o formato especificado\n\n      data.matches.forEach(match => {\n        updateTeamStats(teams, match.homeTeam, match.matchPlayed, match.goalsFor, match.goalsAgainst, match.points);\n        updateTeamStats(teams, match.awayTeam, match.matchPlayed, match.goalsAgainst, match.goalsFor, match.points);\n      }); // Converte o objeto de equipes em uma matriz e a ordena por pontos\n\n      const leaderboard = Object.values(teams).sort((a, b) => b.points - a.points);\n      return leaderboard;\n    } catch (error) {\n      console.error('Error fetching leaderboard:', error);\n      throw error;\n    }\n  }\n  /**\n   * Asynchronic function to fetch the data from the server.\n   */\n\n\n  async fetchData() {\n    try {\n      await Promise.all([this.getMatches(), this.getLeaderboard()]);\n      console.log('Data fetched successfully');\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      throw error;\n    }\n  }\n\n}\n\nexport default LeagueService;","map":{"version":3,"names":["LeagueService","constructor","apiUrl","token","setMatches","matches","response","fetch","method","headers","body","JSON","stringify","ok","Error","error","console","getMatches","data","json","getLeaderboard","teams","forEach","match","updateTeamStats","homeTeam","matchPlayed","goalsFor","goalsAgainst","points","awayTeam","leaderboard","Object","values","sort","a","b","fetchData","Promise","all","log"],"sources":["/Users/cristianoribeiro/CODE/cristiano-ribeiro-cXXv-sports-league-web-ui-Z2zA/src/services/LeagueService.js"],"sourcesContent":["/**\n * A class representing a service that processes the data for match schedule\n * and generates leaderboard.\n * \n * NOTE: MAKE SURE TO IMPLEMENT ALL EXISITNG METHODS BELOW WITHOUT CHANGING THE INTERFACE OF THEM, \n *       AND PLEASE DO NOT RENAME, MOVE OR DELETE THIS FILE.  \n * \n *       ADDITIONALLY, MAKE SURE THAT ALL LIBRARIES USED IN THIS FILE FILE ARE COMPATIBLE WITH PURE JAVASCRIPT\n * \n */\nclass LeagueService {\n\n    constructor(apiUrl, token) {\n        this.apiUrl = apiUrl;\n        this.token = token;\n    }\n\n    /**\n     * Sets the match schedule.\n     * Match schedule will be given in the following form:\n     * [\n     *      {\n     *          matchDate: [TIMESTAMP],\n     *          stadium: [STRING],\n     *          homeTeam: [STRING],\n     *          awayTeam: [STRING],\n     *          matchPlayed: [BOOLEAN],\n     *          homeTeamScore: [INTEGER],\n     *          awayTeamScore: [INTEGER]\n     *      },\n     *      {\n     *          matchDate: [TIMESTAMP],\n     *          stadium: [STRING],\n     *          homeTeam: [STRING],\n     *          awayTeam: [STRING],\n     *          matchPlayed: [BOOLEAN],\n     *          homeTeamScore: [INTEGER],\n     *          awayTeamScore: [INTEGER]\n     *      }    \n     * ]\n     * \n     * @param {Array} matches List of matches.\n     */\n    async setMatches(matches) {\n        try {\n            const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${this.token}`\n                },\n                body: JSON.stringify(matches)\n            });\n            if (!response.ok) {\n                throw new Error('Failed to set matches');\n            }\n        } catch (error) {\n            console.error('Error setting matches:', error);\n            throw error;\n        }\n    }\n    /**\n     * Returns the full list of matches.\n     * \n     * @returns {Array} List of matches.\n     */\n    async getMatches() {\n        try {\n            const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n                headers: {\n                    'Authorization': `Bearer ${this.token}`\n                }\n            });\n            if (!response.ok) {\n                throw new Error('Failed to fetch matches');\n            }\n            const data = await response.json();\n            return data.matches;\n        } catch (error) {\n            console.error('Error fetching matches:', error);\n            throw error;\n        }\n    }\n    /**\n     * Returns the leaderboard in a form of a list of JSON objecs.\n     * \n     * [     \n     *      {\n     *          teamName: [STRING]',\n     *          matchesPlayed: [INTEGER],\n     *          goalsFor: [INTEGER],\n     *          goalsAgainst: [INTEGER],\n     *          points: [INTEGER]     \n     *      },      \n     * ]       \n     * \n     * @returns {Array} List of teams representing the leaderboard.\n     */\n    async getLeaderboard() {\n        try {\n        const response = await fetch(`${this.apiUrl}/getAllMatches`, {\n            headers: {\n                'Authorization': `Bearer ${this.token}`\n            }\n        });\n        if (!response.ok) {\n            throw new Error('Failed to fetch leaderboard');\n        }\n        const data = await response.json();\n\n        // Inicializa um objeto para armazenar as estatísticas das equipes\n        const teams = {};\n\n        // Mapeia os dados de partidas para o formato especificado\n        data.matches.forEach(match => {\n            updateTeamStats(teams, match.homeTeam, match.matchPlayed, match.goalsFor, match.goalsAgainst, match.points);\n            updateTeamStats(teams, match.awayTeam, match.matchPlayed, match.goalsAgainst, match.goalsFor, match.points);\n        });\n\n        // Converte o objeto de equipes em uma matriz e a ordena por pontos\n        const leaderboard = Object.values(teams).sort((a, b) => b.points - a.points);\n\n        return leaderboard;\n    } catch(error) {\n        console.error('Error fetching leaderboard:', error);\n        throw error;\n    }\n\n}\n    /**\n     * Asynchronic function to fetch the data from the server.\n     */\n    async fetchData() {\n    try {\n        await Promise.all([this.getMatches(), this.getLeaderboard()]);\n        console.log('Data fetched successfully');\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n}\n}\n\nexport default LeagueService;"],"mappings":"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"},"metadata":{},"sourceType":"module"}